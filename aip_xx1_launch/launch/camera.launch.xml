<launch>

  <arg name="launch_driver" default="true" />
  <arg name="camera_type" default="left" />

  <group>
    <push-ros-namespace namespace="camera"/>
    <group>

      <push-ros-namespace namespace="c1" />
        <group>

          <arg name="input_topic_name" default="image_raw/compressed"/>
          <arg name="output_topic_name" default="image_raw"/>

          <node pkg="image_transport_decompressor" exec="image_transport_decompressor_node" name="$(anon image_transport_decompressor_node)">
            <remap from="~/input/compressed_image" to="$(var input_topic_name)"/>
            <remap from="~/output/raw_image" to="$(var output_topic_name)"/>
          </node>

          <node pkg="image_diagnostics" exec="image_diagnostics_node" name="image_diagnostics_node">
            <remap from="input/raw_image" to="$(var output_topic_name)"/>
          </node>
        </group>
    </group>
      <push-ros-namespace namespace="c2" />
      <group>

          <arg name="input_topic_name" default="image_raw/compressed"/>
          <arg name="output_topic_name" default="image_raw"/>

          <node pkg="image_transport_decompressor" exec="image_transport_decompressor_node" name="$(anon image_transport_decompressor_node)">
            <remap from="~/input/compressed_image" to="$(var input_topic_name)"/>
            <remap from="~/output/raw_image" to="$(var output_topic_name)"/>
          </node>

          <node pkg="image_diagnostics" exec="image_diagnostics_node" name="image_diagnostics_node">
            <remap from="input/raw_image" to="$(var output_topic_name)"/>
          </node>
        </group>
  </group>
</launch>
